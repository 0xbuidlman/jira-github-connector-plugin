<html>
  <head>
    <title>GitHub Global Plugin Settings</title>

    <script type="text/javascript">
    </script>

    <style type="text/css">
    </style>

  </head>

  <body>

    <div style="background: #FFFFFF">

      <table class="jiraform maxWidth">
        <tr>
          <td class="jiraformheader">
            <h3 class="formtitle"><a href="/jira/secure/admin/ConfigureRepositories.jspa">GitHub Global Plugin Settings</a></h3>
          </td>
        </tr>

        <form id="GitHubUserForm" method="post" action="${req.contextPath}/secure/admin/ConfigureGlobalSettings.jspa">

            <tr>
                <td class="jiraformbody">

                    <h3>GitHub User Configuration</h3>

                    <p>Please specify the user account that will perform actions within JIRA. These include adding comments, etc. </p>

                        <input type="hidden" name="nextAction" value="SetJiraGitHubUser">

                                 <input type="text"
                                 id="jiraUser"
                                 name="jiraGitHubUser"
                                 value="$action.getSavedJiraGitHubUser()"
                                 size="60"
                                 />
                        <p/>



                </td>
            </tr>

            <tr>
                <td>
                    <input type="submit" name="Submit" id="Submit" value="Set JIRA GitHub User" class="spaced"/>
                </td>

            </tr>

        </form>

        <tr>
          <td class="jiraformbody">

              <h3>GitHub OAuth Configuration</h3>

              <p>To sync with private GitHub repositories you will need to <a href="https://github.com/account/applications/new">create a new GitHub OAuth Application.</a></p>

              <p>For the Callback URL, please enter in your <a href="/jira/secure/admin/ViewSystemInfo.jspa">JIRA Base URL</a>. This is necessary as a portion of the OAuth authentication process will have GitHub POSTing access tokens back to your JIRA instance.</p>

              <p>Additionally, please do <strong>NOT</strong> include a trailing slash "/" on the Callback URL as this will cause the callbacks to fail.</p>

              <div>
                  <img style="border: 10px solid #ddd;" src="https://img.skitch.com/20110318-q71u2j54y29bufi6kkix8bu9eh.jpg">
              </div>

               <br/>
              <p>After you create the application, GitHub will provide you with a <strong>Client ID</strong> and a <strong>Client Secret</strong> which you will need to enter below.</p>


                #if ($action.getMessages() != "")
                    <div style="margin: 10px; border: 2px solid black; background: #ddd; padding: 15px;">
                           $action.getMessages()
                    </div>
                #end

                #if ($action.getValidations() != "")
                    <div style="margin: 10px; border: 2px solid red; width: 400px; background: #ddd; padding: 15px;">
                           <h3>$action.getValidations() </h3>
                    </div>
                #end

                 <form id="repoEntry" method="post" action="${req.contextPath}/secure/admin/ConfigureGlobalSettings.jspa">
                      <input type="hidden" name="nextAction" value="SetOAuthValues">
                      <table width="500px">

                        <tr>
                          <td>Client ID</td>

                          <td>
                             <input type="text"
                             id="clientID"
                             name="clientID"
                             value="$action.getSavedClientID()"
                             size="60"
                             />

                          </td>

                        </tr>

                          <tr>
                            <td>Client Secret</td>

                            <td>
                               <input type="text"
                               id="clientSecret"
                               name="clientSecret"
                               value="$action.getSavedClientSecret()"
                               size="60"
                               />

                            </td>

                          </tr>


                        <tr>
                            <td></td>
                            <td class="fullyCentered jiraformfooter">
                                <input type="submit" name="Submit" id="Submit" value="Add/Update Keys"
                                class="spaced"
                                />
                            </td>
                        </tr>

                      <table>
                 </form>
          </td>
        </tr>

      </table>
      <br>

  </body>
</html>